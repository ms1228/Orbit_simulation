<!DOCTYPE html>
<!-- This is an attempt to make orbital element arrays for the various
	time steps.
	The orbital elements of the planets (including the Earth-Moon Barycenter
	are from the Astronomical Almanac 2016, for the Julian Date
	2457360.5 which is roughly 2015 December 04.
   Started 20170929 by paul hemenway for the solar system project with Manisha
-->
<html>
<head>
 <title>Solar System Orrery</title>
  <style>
    #plotSS {border: solid black 1px; }
  </style>

</head>

<body>

<h2>Solar System Orrery from The University of Denver</h2>
<h3> Based on two body oscullating elements for 4 December 2015 </h3>
<h3>	(JD 2457360.5) </h3>
<table>
  <tr><th> Pick Your Planets:</th><td></td><th>The Solar System</th>
  </tr>
  <tr> <td></td><td></td> <td rowspan=16>
	<canvas id='plotSS' width="800" height="500" style="position:relative;"`>
	Canvas is not supported;  please update your browser.</canvas></td>
  </tr>
  <tr><td><input type="checkbox" id="Mercury" onclick="merFunction()"
           value =0></td><td>Mercury</td>
  </tr>

  <tr><td><input type="checkbox" id="Venus" onclick="venFunction()"
           value =0></td>
  <td>Venus</td>
  </tr>

  <tr><td><input type="checkbox" id="Earth" onclick="earFunction()"
           value =0></td>
  <td>Earth </td>
  </tr>

  <tr><td><input type="checkbox" id="Mars" onclick="marFunction()"
           value =0></td>
  <td>Mars </td>
  </tr>

  <tr><td><input type="checkbox" id="Jupiter"" onclick="jupFunction()"
           value =0></td>
  <td>Jupiter </td>
  </tr>

  <tr><td><input type="checkbox" id="Saturn" onclick="satFunction()"
           value =0></td>
  <td>Saturn </td>
  </tr>

  <tr><td><input type="checkbox" id="Uranus" onclick="uraFunction()"
           value =0></td>
  <td>Uranus </td>
  </tr>

  <tr><td><input type="checkbox" id="Neptune" onclick="nepFunction()"
           value =0></td>
  <td>Neptune </td>
  </tr>

  <tr><td></td></tr>

  <tr><th>Set the Times:</th></tr>

  <tr><td><input type="number" id="time_step" name="ts1" min="1" max="30"> 
      </td><td>Time Step (Days, min = 1, max = 30)</td>
  </tr>

  <tr><td><input  type="number" id="num_days" name="nd1" min="30" max="750">
      </td><td>Number of Days (between 30 and 750) </td>
  </tr>

  <tr><td></td></tr>

  <tr><td> RUN It?</td></tr>

  <tr> <td><input type="checkbox" onclick="doItAll()"
		name="go_reset" value="go"> </td> <td>GO</td>
  </tr>

  <tr><td></td>
  </tr>


</table>


<p id='demo_1'></p>
<p id="demo_2"></p>

<p id="demo_3"></p>
<p id="demo_4"></p>

<p id='demo_5'></p>
<p id='demo_6'></p>

<p id='demo_7'></p>
<p id='demo_8'></p>

<p id='demo_9'></p>
<p id='demo_10'></p>

<p id='demo_11'></p>
<p id='demo_12'></p>

<p id='demo_13'></p>
<p id='demo_14'></p>

<p id='demo_15'></p>
<p id='demo_16'></p>

<p id="p_ear_1"></p>
<p id="p_ear_2"></p>

<p id="p_mar_1"></p>
<p id="p_mar_2"></p>




<!-- <p> Time Step as read:</p>
<p id="time_step_read">Time-step as read </p> 

<p> Number of days as read:</p>
<p id="num_days_read">Num Days printed</p> 

<p> Computed number of steps:</p>
<p id='num_steps_display'>Number of Steps Display</p> -->

<p> Planet Flags: </p>

<p id='planet_flag_test'>Planet Flag Test</p>
<p id='planet_flag_test2'>Planet Flag Test2</p>

<p id='planet_generic_display'>Generic Display 1</p>

<p> The Selected Planets are, in order:</p>
<p id='planet_generic_display2'>Generic Display 2</p>

<p> The Time Step Vector is:</p>
<p id='time_step_vector_display'>The Time Step Vector</p>

<p> The eccentricity vector is:</p>
<p id='ecc_vector_display'> Eccentricity Vector here</p>

<p> The eccentricity matrix is:</p>
<p id='ecc_matrix_display'> Eccentricity Matrix here</p>

<p>The last function called with a function entry display is:</p>
<p id='function_entry_display'>

<p id='generic_display'>Generic Display</p>

// -------------------------------------------------



<script>

// -------------------------------------------------

// Define all global variables here to start:

var path_test = 0;
var plotSS = document.getElementById("plotSS");
var theContext = plotSS.getContext("2d");
var centerX = plotSS.width/2;
var centerY = plotSS.height/2;
//	document.getElementById('generic_display').innerHTML = centerX ;
var twopi = 2*Math.PI;

var plan_id = [1,2,3,4,5,6,7,8];

// plan_flag is 1 if the planet is included, 0 if excluded in this run.
//  E.g.: plan_flag = [0,1,1,0,0,0,1,0] means Venus, Earth, and Uranus are in.
var plan_flag = [0,0,0,0,0,0,0,0];

// plan_counter is the planet number in each spot of the included planets:
// E.g.:  [2,3,7,0,0,0,0,0] means that Venus, Earth, and Uranus are included.
var plan_counter = [0,0,0,0,0,0,0,0];

// dt_vector is a vector of delta times from dt = 0
// E.g.:  If the time interval is 5 days and there are 4 intervals or 5 times total, dt_vector = [0,5,10,15,20]
var dt_vector = [0,0];

var big_G = 1;
var big_G_mks = 6.672590000000000e-11;
var a3 = [ ];
var ecc_plan = [0.20563000,   0.00674900,   0.01670050,   0.09336870,   0.04890600,   0.05415740,   0.05071280,   0.00764670];
var inc_deg_plan = [7.0040400000,   3.3944000000,   0.0020700000,   1.8483800000,   0.0000329240,   2.4877700000,   0.7723000000,   1.7723200000 ];
var inc_rad_plan = [0.1222435589,  0.0592434561,  0.0000361283,  0.0322603168,  0.0000005746,  0.0434197775,  0.0134791778,  0.0309328194 ];
var lan_deg_plan = [48.31080000,   76.63490000,  172.50000000,   49.50890000,  100.51290000,  113.57580000,   73.94280000,  131.82030000 ];
var lan_rad_plan = [0.8431825243,  1.3375313269,  3.0106929597,  0.8640933140,  1.7542810457,  1.9822716606,  1.2905453181,  2.3006982560 ];
var lonperi_deg_plan = [77.47930000,  131.75000000,  102.96440000,  336.12450000,  14.30480000,  93.47550000,  172.07460000,  75.77600000 ];
var lonperi_rad_plan = [1.3522688871,  2.2994712895,  1.7970677923,  5.8664792216,  0.2496658588,  1.6314552449,  3.0032683291,  1.3225406940 ];
var meanmotion_degperday_plan = [4.0923452054,  1.6021480215,  0.9856135614,  0.5239848561,  0.0831060783,  0.0334087680,  0.0117868925,  0.0060181975 ];
var meanmotion_radperday_plan = [0.0714248980,  0.0279627581,  0.0172022018,  0.0091452610,  0.0014504747,  0.0005830930,  0.0002057201,  0.0001050374 ];
var meanlon_2457360p5_deg_plan = [291.24990000,  139.16887000,   72.27412000,  162.96067000,  157.58966000,  244.49442000,   21.55796000,  339.62720000 ];
var meanlon_2457360p5_rad_plan = [5.083269701104,  2.428954997780,  1.261421357981,  2.844200242756,  2.750458434098,  4.267232631754,  0.376257382013,  5.927612869329 ];
var recipricol_solar_mass_fraction_plan = [6023600.000000,   408523.719000,   328900.559600,  3098703.590000,     1047.348644,     3497.901800,    22902.980000,    19412.260000 ];
var semimaj_au_plan = [0.38709830,  0.72332700,  0.99999710,  1.52378480,  5.20218400,  9.54854400, 19.12242000, 29.93408000];
var mer_str='Mercury is ON, ecc=' + ecc_plan[0] + ',  a=' + semimaj_au_plan[0] + 'AU,  i=' + inc_deg_plan[0] + 'deg, lan=' + lan_deg_plan[0] + 'deg, lon_peri=' + lonperi_deg_plan[0] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[0] + 'deg' ;
var ven_str='Venus is ON, ecc=' + ecc_plan[1] + ',  a=' + semimaj_au_plan[1] + 'AU,  i=' + inc_deg_plan[1] + 'deg, lan=' + lan_deg_plan[1] + 'deg, lon_peri=' + lonperi_deg_plan[1] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[1] + 'deg' ;
var ear_str='Earth is ON, ecc=' + ecc_plan[2] + ',  a=' + semimaj_au_plan[2] + 'AU,  i=' + inc_deg_plan[2] + 'deg, lan=' + lan_deg_plan[2] + 'deg, lon_peri=' + lonperi_deg_plan[2] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[2] + 'deg' ;
var mar_str='Mars is ON, ecc=' + ecc_plan[3] + ',  a=' + semimaj_au_plan[3] + 'AU,  i=' + inc_deg_plan[3] + 'deg, lan=' + lan_deg_plan[3] + 'deg, lon_peri=' + lonperi_deg_plan[3] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[3] + 'deg' ;
var jup_str='Jupiter is ON, ecc=' + ecc_plan[4] + ',  a=' + semimaj_au_plan[4] + 'AU,  i=' + inc_deg_plan[4] + 'deg, lan=' + lan_deg_plan[4] + 'deg, lon_peri=' + lonperi_deg_plan[4] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[4] + 'deg' ;
var sat_str='Saturn is ON, ecc=' + ecc_plan[5] + ',  a=' + semimaj_au_plan[5] + 'AU,  i=' + inc_deg_plan[5] + 'deg, lan=' + lan_deg_plan[5] + 'deg, lon_peri=' + lonperi_deg_plan[5] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[5] + 'deg' ;
var ura_str='Uranus is ON, ecc=' + ecc_plan[6] + ',  a=' + semimaj_au_plan[6] + 'AU,  i=' + inc_deg_plan[6] + 'deg, lan=' + lan_deg_plan[6] + 'deg, lon_peri=' + lonperi_deg_plan[6] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[6] + 'deg' ;
var nep_str='Neptune is ON, ecc=' + ecc_plan[7] + ',  a=' + semimaj_au_plan[7] + 'AU,  i=' + inc_deg_plan[7] + 'deg, lan=' + lan_deg_plan[7] + 'deg, lon_peri=' + lonperi_deg_plan[7] + 'deg, mean lon 2016.0=' + meanlon_2457360p5_deg_plan[7] + 'deg' ;

// ecc_matrix is a matrix of the selected planets in a row vector,
//    repeated once for each time step.
var ecc_matrix = [0];

// similarly for the other orbital element matrices.
var lan_rad_matrix = [0];
var lonperi_rad_matrix = [0];
var meanmotion_radperday_matrix = [0];
var meanlon_2457360p5_rad_matrix = [0];
var semimaj_au_matrix = [0];
var inc_rad_matrix = [0];
var recipricol_solar_mass_fraction_matrix = [0];

var time_step = document.getElementById("time_step");
var dt = Number(time_step.value);

// Each element vector is a row vector with length = number of planets selected.
// Each element matrix has number of rows = number of time steps.
//                         number of columns = number of planets selected.

	var ecc_vector = [0];
	var lan_rad_vector = [0];
	var lonperi_rad_vector = [0];
	var meanmotion_radperday_vector = [0];
	var meanlon_2457360p5_rad_vector = [0];
	var mean_anom_rad_vector = [0];
	var semimaj_au_vector = [0];
	var inc_rad_vector = [0];
	var recipricol_solar_mass_fraction_vector = [0];

document.getElementById('demo_2').innerHTML = 'Mercury is Off';
document.getElementById('demo_4').innerHTML = 'Venus is Off';
document.getElementById('demo_6').innerHTML = 'Earth is Off';
document.getElementById('demo_8').innerHTML = 'Mars is Off';
document.getElementById('demo_10').innerHTML = 'Jupiter is Off';
document.getElementById('demo_12').innerHTML = 'Saturn is Off';
document.getElementById('demo_14').innerHTML = 'Uranus is Off';
document.getElementById('demo_16').innerHTML = 'Neptune is Off';

// -------------------------------------------------

// Initial function calls go here:

drawSun();

// -------------------------------------------------
// -------------------------------------------------
//       Define the individual planet functions here:


function merFunction(){
	document.getElementById('function_entry_display').innerHTML = 'in merFunction';
        var mer_test;
	mer_test = document.getElementById('Mercury').value;
        
	 if (mer_test == 0){
	   document.getElementById('demo_2').innerHTML = mer_str;
	   document.getElementById('Mercury').value = 1;
	   mer_test = 1;
		plan_flag[0] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
		
//	   document.getElementById('demo_1').innerHTML = mer_test;
	                   }
			 
	
	 else if (mer_test == 1){
	document.getElementById('demo_2').innerHTML = 'Mercury is OFF';
	document.getElementById('Mercury').value = 0;
        mer_test = 0;
		plan_flag[0] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_1').innerHTML = mer_test;
			}
                           }
// -------------------------------------------------


function venFunction(){
        var ven_test;
	ven_test = document.getElementById('Venus').value;
        
	 if (ven_test == 0){
	   document.getElementById('demo_4').innerHTML = ven_str;
	   document.getElementById('Venus').value = 1;
	   ven_test = 1;
                plan_flag[1] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
		if (plan_counter[1] == 0){
                        plan_counter[1] = 2;
                                      }
                  else{
                        plan_counter[2] = 1;
	               }
//	   document.getElementById('demo_3').innerHTML = ven_test;
	                   }
			 
	
	 else if (ven_test == 1){
	document.getElementById('demo_4').innerHTML = 'Venus is OFF';
	document.getElementById('Venus').value = 0;
        ven_test = 0;
		plan_flag[1] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_3').innerHTML = ven_test;
			}
                           }
// -------------------------------------------------


function earFunction(){
        var ear_test;
	ear_test = document.getElementById('Earth').value;
        
	 if (ear_test == 0){
	   document.getElementById('demo_6').innerHTML = ear_str;
	   document.getElementById('Earth').value = 1;
	   ear_test = 1;
		plan_flag[2] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	   document.getElementById('demo_5').innerHTML = ear_test;
	                   }
			 
	
	 else if (ear_test == 1){
	document.getElementById('demo_6').innerHTML = 'Earth is OFF';
	document.getElementById('Earth').value = 0;
        ear_test = 0;
		plan_flag[2] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_5').innerHTML = ear_test;
			}
                           }
// -------------------------------------------------


function marFunction(){
        var mar_test;
	mar_test = document.getElementById('Mars').value;
        
	 if (mar_test == 0){
	   document.getElementById('demo_8').innerHTML = mar_str;
	   document.getElementById('Mars').value = 1;
	   mar_test = 1;
		plan_flag[3] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	   document.getElementById('demo_7').innerHTML = mar_test;
	                   }
			 
	
	 else if (mar_test == 1){
	document.getElementById('demo_8').innerHTML = 'Mars is OFF';
	document.getElementById('Mars').value = 0;
        mar_test = 0;
		plan_flag[3] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_7').innerHTML = mar_test;
			}
			  }
// -------------------------------------------------


function jupFunction(){
        var jup_test;
	jup_test = document.getElementById('Jupiter').value;
        
	 if (jup_test == 0){
	   document.getElementById('demo_10').innerHTML = jup_str;
	   document.getElementById('Jupiter').value = 1;
	   jup_test = 1;
		plan_flag[4] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	   document.getElementById('demo_9').innerHTML = jup_test;
	                   }
			 
	
	 else if (jup_test == 1){
	document.getElementById('demo_10').innerHTML = 'Jupiter is OFF';
	document.getElementById('Jupiter').value = 0;
        jup_test = 0;
		plan_flag[4] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_9').innerHTML = jup_test;
			}
			  }
// -------------------------------------------------


function satFunction(){
        var sat_test;
	sat_test = document.getElementById('Saturn').value;
        
	 if (sat_test == 0){
	   document.getElementById('demo_12').innerHTML = sat_str;
	   document.getElementById('Saturn').value = 1;
	   sat_test = 1;
		plan_flag[5] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	   document.getElementById('demo_11').innerHTML = sat_test;
	                   }
			 
	
	 else if (sat_test == 1){
	document.getElementById('demo_12').innerHTML = 'Saturn is OFF';
	document.getElementById('Saturn').value = 0;
        sat_test = 0;
		plan_flag[5] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_11').innerHTML = sat_test;
			}
			  }
// -------------------------------------------------


function uraFunction(){
        var ura_test;
	ura_test = document.getElementById('Uranus').value;
        
	 if (ura_test == 0){
	   document.getElementById('demo_14').innerHTML = ura_str;
	   document.getElementById('Uranus').value = 1;
	   ura_test = 1;
		plan_flag[6] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	   document.getElementById('demo_13').innerHTML = ura_test;
	                   }
			 
	
	 else if (ura_test == 1){
	document.getElementById('demo_14').innerHTML = 'Uranus is OFF';
	document.getElementById('Uranus').value = 0;
        ura_test = 0;
		plan_flag[6] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_13').innerHTML = ura_test;
			}
			  }
// -------------------------------------------------


function nepFunction(){
        var nep_test;
	nep_test = document.getElementById('Neptune').value;
        
	 if (nep_test == 0){
	   document.getElementById('demo_16').innerHTML = nep_str;
	   document.getElementById('Neptune').value = 1;
	   nep_test = 1;
		plan_flag[7] = 1;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	   document.getElementById('demo_15').innerHTML = nep_test;
	                   }
			 
	
	 else if (nep_test == 1){
	document.getElementById('demo_16').innerHTML = 'Neptune is OFF';
	document.getElementById('Neptune').value = 0;
        nep_test = 0;
		plan_flag[7] = 0;
                document.getElementById('planet_flag_test').innerHTML = plan_flag;
//	document.getElementById('demo_15').innerHTML = nep_test;
			}
			  }
// var time_step = document.getElementById("time_step");
// var dt = Number(time_step.value);
// document.getElementById('time_step_read').innerHTML = dt;

// -------------------------------------------------


function doItAll(){

 	document.getElementById('function_entry_display').innerHTML = 'in doItAll';
	var time_step =  document.getElementById("time_step");
	var num_days =   document.getElementById("num_days");
	var dt = Number(time_step.value);
	var nd = Number(num_days.value);
        var ns = nd/dt;
	var num_steps=Math.floor(ns);
// 	document.getElementById('time_step_read').innerHTML = dt;
//       document.getElementById('num_days_read').innerHTML = nd;
			   
//	document.getElementById('num_steps_display').innerHTML = num_steps;
	document.getElementById('planet_flag_test2').innerHTML = plan_flag;

// ---------- new add:  -------------
		dt_vector[0] = 0;
		for (var jj = 0; jj<=num_steps; jj++) {
			dt_vector[jj] = jj*dt;
						      }
// --------  end new add -------------

	document.getElementById('time_step_vector_display').innerHTML = dt_vector;

	path_test = 0;
        setupPlanetcounter();
        makeElementarrays();
	mean_anom_rad_mat = makeMeananomalyradmatrix();
	 makeEccentricAnomalies(ecc_mat,mean_anom_rad_mat)


			   }
// -------------------------------------------------
// -------------------------------------------------
// -------------------------------------------------


function drawSun(){

 	document.getElementById('function_entry_display').innerHTML = 'in drawSun';
	theContext.beginPath()
	
	theContext.arc(centerX,centerY,2,0,2*Math.PI);
	theContext.fillStyle = "orange";
	theContext.fill();
                  }

drawSun(0,0);

// -------------------------------------------------

 function setupPlanetcounter() {

 	document.getElementById('function_entry_display').innerHTML = 'in setupPlanetcounter';
	var j = 0
         for(var i = 0; i<plan_flag.length; i++){
		if (plan_flag[i] == 1) { plan_counter[j] = i+1; j=j+1;
					}
						}
	plan_counter.length = j;
				}
// -------------------------------------------------


 function makeElementarrays(){

// Each element vector is a row vector with length = number of planets selected.
// Each element matrix has number of rows = number of time steps.
//                         number of columns = number of planets selected.

 	
       document.getElementById('function_entry_display').innerHTML = "In makeElementarrays";
	document.getElementById('planet_generic_display2').innerHTML = plan_counter;

for (var ie = 1; ie <= plan_counter.length; ie++){
	ecc_vector[ie - 1] = ecc_plan[ plan_counter[ie - 1] -1 ]; 
	lan_rad_vector[ie -1] = lan_rad_plan[ plan_counter[ie - 1] -1 ];
	lonperi_rad_vector[ie - 1] = lonperi_rad_plan[ plan_counter[ie - 1] -1 ]; 
	meanmotion_radperday_vector[ie - 1] = meanmotion_radperday_plan[ plan_counter[ie - 1] -1 ]; 
	meanlon_2457360p5_rad_vector[ie - 1] = meanlon_2457360p5_rad_plan[ plan_counter[ie - 1] -1 ];
	semimaj_au_vector[ie -1] = semimaj_au_plan[ plan_counter[ie - 1] - 1];
	inc_rad_vector[ie-1] = inc_rad_plan[ plan_counter[ie - 1] -1];
	recipricol_solar_mass_fraction_vector[ie - 1] = recipricol_solar_mass_fraction_plan[ plan_counter[ie -1 ] -1];

					}

	document.getElementById('ecc_vector_display').innerHTML = ecc_vector;

// make element matrices:

for (var ie2 = 1; ie2 <= dt_vector.length; ie2++){
	ecc_matrix[ie2 - 1] = ecc_vector;
	document.getElementById('ecc_matrix_display').innerHTML = ecc_matrix;
	
	lan_rad_matrix[ie2 - 1] = lan_rad_vector;
	lonperi_rad_matrix[ie2 - 1] = lonperi_rad_vector;
	meanmotion_radperday_matrix[ie2 - 1] = meanmotion_radperday_vector;
	meanlon_2457360p5_rad_matrix[ie2 - 1] = meanlon_2457360p5_rad_vector;
	semimaj_au_matrix[ie2 - 1] = semimaj_au_vector;
	inc_rad_matrix[ie2 - 1] = inc_rad_vector;
	recipricol_solar_mass_fraction_matrix[ie2 - 1] = recipricol_solar_mass_fraction_vector;
							}

			   }

// -------------------------------------------------

function kepFunction(ecc1,meananom_rad1){

 	document.getElementById('function_entry_display').innerHTML = 'in kepFunction';

	var pii=Math.PI;
	var twopi=2*pii;
	var deg2rad=pii/180.;
        var rad2deg=180/pii;
	var m_fix;
	var m_mod;
	var eccanom_try;
	var e0;
	var icount;
	var mtest;

	m_fix = Math.floor(meananom_rad1/twopi);
	m_mod = meananom_rad1 - (m_fix*twopi);
        eccanom_try = m_mod + 2e-8;
    e0=eccanom_try;
    icount=0;
    mtest=eccanom_try-ecc1*Math.sin(eccanom_try);

 while (Math.abs(m_mod - mtest)>1.0e-14 ) {
        icount++ ;
        eccanom_try = e0 + ((m_mod - e0) + ecc1*Math.sin(e0))/(1-ecc1*Math.cos(e0));
        e0=eccanom_try;
        mtest=eccanom_try-ecc1*Math.sin(eccanom_try);

					}

	return e0;
			}

// -------------------------------------------------



function makeMeananomalyradmatrix(mean_motion_radperday_matrix,
				){

	return mean_anom_rad_mat1;
                                 }

// -------------------------------------------------


function makeEccentricAnomalies(ecc_matrix,mean_anom_rad_mat){

 	document.getElementById('function_entry_display').innerHTML = 'in makeEccentricAnomalies';

	var num_rows = ecc_mat.length;
	var num_cols = ecc_mat[1].length;
                                                      
	for (var itt = 1; itt <= num_rows; itt++){
	    for (var jplan = 1; jplan <= num_cols; jplan++){
		ecc_mat[itt-1][jplan-1] = kepFunction(ecc_mat[itt-1][jplan-1],
			mean_anom_rad_mat[itt-1][jplan-1]);

	                                                   }

                                                 }
                                                           }

// -------------------------------------------------



 function multiplyMatrices(a,b){
 	document.getElementById('function_entry_display').innerHTML = 'in multiplyMatrices';
  
var nca = a[1].length;
var nra = a.length;
var ncb = b[1].length;
var nrb = b.length;
 
 var result = new Array(ncb);
 
 for (var irow=0; irow<nra; irow++){
         result[irow] = new Array(ncb);
                                  }
var ncresult = result[1].length;
var nrresult = result.length;
 
 	if (nca != nrb){
 
 		document.getElementById('matrix_Result_place').innerHTML = 'input matrices incompatible';
 	
 			}
 
 	for (var kr = 1; kr <=nra; kr++){
 	   for (var kc = 1; kc <= ncb; kc++){
 		result[kr-1][kc-1] = 0;
 		for (var kk = 1; kk <= nca; kk++){
 
                     result[kr-1][kc-1] = result[kr-1][kc-1] + a[kr-1][kk-1]*b[kk-1][kc-1];
  					    }
  					     }
  
                                           }

  return result;
                           }


// -------------------------------------------------


  function drawProjectile() {
    if (path_test == 0){
        theContext.clearRect(0,0, theCanvas.width, theCanvas.height); 
	theContext.beginPath();
// the smaller the 3d number, the smaller the dot:
	theContext.arc(x, y, 2, 0, 2*Math.PI);
        theContext.fillStyle = "blue";
        theContext.fill();
	}
	else if (path_test == 1){
        theContext.beginPath()
	theContext.arc(x, y, 2, 0, 2*Math.PI);
	theContext.fillStyle = "blue";
	theContext.fill();
	}
    }


// -------------------------------------------------



    function moveProjectile(){

                             }

// -------------------------------------------------


</script>

</body>
</html>
